<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: #fff;
            overflow: hidden;
            transform: scale(0.8);
        }

        .weather-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .icon {
            font-size: 120px;
            line-height: 0.8;
        }

        .temp {
            font-size: 60px;
            font-weight: 300;
            margin-bottom: 15px;
        }

        .forecast-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            margin: 8px 0;
        }

        .forecast-icon {
            font-size: 40px;
        }

        .forecast-temp {
            font-size: 22px;
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div class="weather-container">
        <div id="current">
            <div class="icon"></div>
            <div class="temp"></div>
        </div>
        <div id="forecast"></div>
    </div>

    <script>
        // Âõ∫ÂÆö‰πâ‰πåÂùêÊ†á
        const YIWU_COORDS = { 
            lat: 29.3414, 
            lng: 120.0762 
        };

        // Â§©Ê∞îÂõæÊ†áÊò†Â∞Ñ
        const WEATHER_ICONS = {
            'Clear': '‚òÄÔ∏è',
            'Clouds': '‚òÅÔ∏è',
            'Rain': 'üåßÔ∏è',
            'Thunderstorm': '‚õàÔ∏è',
            'Snow': '‚ùÑÔ∏è'
        };

        // È°µÈù¢Âä†ËΩΩÊó∂Ëé∑ÂèñÊï∞ÊçÆ
        window.onload = async () => {
            try {
                const [current, forecast] = await Promise.all([
                    fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${YIWU_COORDS.lat}&lon=${YIWU_COORDS.lng}&appid=eacbfc53b389b364ff36170551ca70a8&units=metric`),
                    fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${YIWU_COORDS.lat}&lon=${YIWU_COORDS.lng}&appid=eacbfc53b389b364ff36170551ca70a8&units=metric`)
                ]);
                
                updateDisplay(
                    await current.json(),
                    (await forecast.json()).list
                );
            } catch(error) {
                console.error('Êï∞ÊçÆÂä†ËΩΩÂ§±Ë¥•');
            }
        };

        // Êõ¥Êñ∞ÊòæÁ§∫ÂÜÖÂÆπ
        function updateDisplay(currentData, forecastData) {
            // ÂΩìÂâçÂ§©Ê∞î
            document.querySelector('.icon').textContent = 
                WEATHER_ICONS[currentData.weather.main] || 'üå§Ô∏è';
            document.querySelector('.temp').textContent = 
                `${Math.round(currentData.main.temp)}¬∞`;

            // Â§ÑÁêÜÈ¢ÑÊä•Êï∞ÊçÆ
            const dailyData = {};
            forecastData.forEach(item => {
                const date = new Date(item.dt * 1000);
                const dayKey = date.getDate();
                
                if (!dailyData[dayKey]) {
                    dailyData[dayKey] = {
                        min: item.main.temp,
                        max: item.main.temp,
                        icon: item.weather.main
                    };
                } else {
                    dailyData[dayKey].min = Math.min(dailyData[dayKey].min, item.main.temp);
                    dailyData[dayKey].max = Math.max(dailyData[dayKey].max, item.main.temp);
                }
            });

            // ÊòæÁ§∫È¢ÑÊä•
            document.getElementById('forecast').innerHTML = 
                Object.values(dailyData)
                    .slice(1, 6) // ÊòæÁ§∫Êú™Êù•5Â§©
                    .map(day => `
                        <div class="forecast-item">
                            <div class="forecast-icon">${WEATHER_ICONS[day.icon] || 'üå§Ô∏è'}</div>
                            <div class="forecast-temp">${Math.round(day.min)}/${Math.round(day.max)}¬∞</div>
                        </div>
                    `).join('');
        }
    </script>
</body>
</html>
